
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/bootstrap.min.js"></script>
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/retina-1.1.0.js"></script>
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/jquery.hoverdir.js"></script>
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/jquery.hoverex.min.js"></script>
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/jquery.prettyPhoto.js"></script>
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/jquery.isotope.min.js"></script>

<!-- scrollTo -->
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/jquery.scrollTo.min.js"></script>
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/jquery.easing.min.js"></script>

<!-- Animate -->
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/wow.min.js"></script>

<!-- custom -->
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/custom.js"></script>

<!-- mailchimp popup Signup demo -->
<script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/signup-forms/popup/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script>
<script type="text/javascript">
  function showMailingPopUp() {
    {% if page.lang == 'es' %}
      //spanish version
      require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us11.list-manage.com","uuid":"6c8ebdf66f7cedc23b4c8e986","lid":"9616808aa7"}) })
      document.cookie = "MCEvilPopupClosed=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    {% endif %}
    {% if page.lang == 'en' %}
      // english version
      require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us11.list-manage.com","uuid":"6c8ebdf66f7cedc23b4c8e986","lid":"9d20a69da4"}) })
    {% endif %}
  };
  document.getElementById("open-popup").onclick = function() {showMailingPopUp()};
</script>

<script type="text/javascript">
  function showMailingPopUpPhone() {
    {% if page.lang == 'es' %}
      //spanish version
      require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us11.list-manage.com","uuid":"6c8ebdf66f7cedc23b4c8e986","lid":"703f45b6ac"}) })
      document.cookie = "MCEvilPopupClosed=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    {% endif %}
    {% if page.lang == 'en' %}
      // english version
      require(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us11.list-manage.com","uuid":"6c8ebdf66f7cedc23b4c8e986","lid":"e3604b29e9"}) })
    {% endif %}
  };
  document.getElementById("open-popup-phone").onclick = function() {showMailingPopUpPhone()};
</script>

<script>
// Portfolio
(function($) {
	"use strict";
	var $container = $('.portfolio'),
		$items = $container.find('.portfolio-item'),
		portfolioLayout = 'fitRows';

		if( $container.hasClass('portfolio-centered') ) {
			portfolioLayout = 'masonry';
		}

		$container.isotope({
			filter: '*',
			animationEngine: 'best-available',
			layoutMode: portfolioLayout,
			animationOptions: {
			duration: 750,
			easing: 'linear',
			queue: false
		},
		masonry: {
		}
		}, refreshWaypoints());

		function refreshWaypoints() {
			setTimeout(function() {
			}, 1000);
		}

		$('nav.portfolio-filter ul a').on('click', function() {
				var selector = $(this).attr('data-filter');
				$container.isotope({ filter: selector }, refreshWaypoints());
				$('nav.portfolio-filter ul a').removeClass('active');
				$(this).addClass('active');
				return false;
		});

		function getColumnNumber() {
			var winWidth = $(window).width(),
			columnNumber = 1;

			if (winWidth > 1200) {
				columnNumber = 4;
			} else if (winWidth > 992) {
		        columnNumber = 4;
			} else if (winWidth > 950) {
				columnNumber = 4;
			} else if (winWidth > 600) {
				columnNumber = 4;
			} else if (winWidth > 400) {
				columnNumber = 1;
			} else if (winWidth > 250) {
				columnNumber = 1;
			}
				return columnNumber;
			}

			function setColumns() {
				var winWidth = $(window).width(),
				columnNumber = getColumnNumber(),
				itemWidth = Math.floor(winWidth / columnNumber);

				$container.find('.portfolio-item').each(function() {
					$(this).css( {
					width : itemWidth + 'px'
				});
			});
		}

		function setPortfolio() {
			setColumns();
			$container.isotope('reLayout');
		}

		$container.imagesLoaded(function () {
			setPortfolio();
		});

		$(window).on('resize', function () {
		setPortfolio();
	});
})(jQuery);
</script>

<!-- Map case of study -->
<script src="{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/js/gvsigroads-geojson.js" type="text/javascript"></script>
<script>
  //map point: spain
  var map = L.map('map').setView([40.0700000311,5.6], 5);
  //theme
  var layer = L.esri.basemapLayer('DarkGray').addTo(map);

  // theme Mapbox
/*   L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, '+
      'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    id: 'mapbox.light'
  }).addTo(map); */

  var roadsIcon = L.icon({
    iconUrl: '{{ site.url }}{{ site.ASSET_PATH  | prepend: site.baseurl }}/img/roadsIcon.png',
    iconSize: [32, 32],
    iconAnchor: [16, 37],
    popupAnchor: [0, -28]
  });

  function onEachFeature(feature, layer) {
    var popupContent = "";

    if (feature.properties && feature.properties.popupContent) {
      popupContent += feature.properties.popupContent;
    }

    layer.bindPopup(popupContent);
  }


  var RoadsLayer = L.geoJSON(RoadsCase, {

    pointToLayer: function (feature, latlng) {
      return L.marker(latlng, {icon: roadsIcon});
    },

    onEachFeature: onEachFeature
  }).addTo(map);

</script>


<!-- cookies consent -->
{% if site.google_analytics %}
<script>
    $(document).ready(function () {
      console.log("Cookies consent loaded");
      $.cookieCuttr();
    });
</script>
{% endif %}